initial = 5,
iter = 30,
metrics = metric_set(accuracy),
control = control_bayes(no_improve = 20, verbose = TRUE)
)
show_best(search_res, metric = "accuracy")
tree.model = decision_tree(mode = "classification",
min_n = 40,
cost_complexity = 0.0) %>%
set_engine("rpart") %>%
fit(y ~ ., data = data)
tree.model %>%
predict(data) %>%
bind_cols(data) %>%
metrics(truth = y, estimate = .pred_class)
summary(tree.model$fit)
rpart.plot(tree.model$fit, roundint=FALSE)
tree.model %>%
predict(data) %>%
bind_cols(data) %>%
metrics(truth = y, estimate = .pred_class)
normal.svm = svm_rbf(mode = "classification",
cost = tune(),
rbf_sigma = tune()) %>%
set_engine("kernlab")
folds <- vfold_cv(data, repeats = 2)
svm.wflow =
workflow() %>%
add_model(normal.svm) %>%
add_recipe(normal.recipe)
svm.set <- parameters(svm.wflow)
search_res =
tune_bayes(
svm.wflow,
resamples = folds,
param_info = svm.set,
initial = 5,
iter = 30,
metrics = metric_set(accuracy),
control = control_bayes(no_improve = 20, verbose = TRUE)
)
show_best(search_res, metric = "accuracy")
svm.model = svm_rbf(mode = "classification",
cost = 0.726,
rbf_sigma = 0.136) %>%
set_engine("kernlab") %>%
fit(y ~ ., data = data)
svm.model %>%
predict(data) %>%
bind_cols(data) %>%
metrics(truth = y, estimate = .pred_class)
s<-ksvm(y~x1+x2, data=data, kernel="rbfdot", C=0.726, kpar=list(sigma = 0.136), type="C-svc")
plot(s, data = data[,-3])
y.pred = numeric(nrow(data))
A.inv = matrix(c(1.1904761904761904761, 	-0.47619047619047619047, -0.47619047619047619044, 1.1904761904761904761), nrow = 2, ncol = 2)
for (i in 1:nrow(data)) {
xi = as.numeric(data[i,1:2])
y0 = exp(-(xi %*% A.inv %*% xi))
cat(y0, "\n")
xi = as.numeric(data[i,1:2] - c(1,2))
y1 = exp(-(xi %*% A.inv %*% xi))
cat(y1, "\n\n")
if (y1 > y0) {
y.pred[i] <- 1
}
else {
y.pred[i] <- 0
}
}
acc <- sum(y.pred == data$y)/100
acc
n = 500
A = matrix(c(1, 0.4, 0, 0.9165), nrow = 2, ncol = 2)
y = rbinom(n, 1, 0.5)
X = matrix(nrow = 2)
for (e in y) {
if (e == 0) {
X = cbind(X, c(rnorm(1, mean = 0, sd = 1), rnorm(1, mean = 0, sd = 1)))
}
else {
X = cbind(X, c(rnorm(1, mean = 1, sd = 1), rnorm(1, mean = 2, sd = 1)))
}
}
X = X[,-1]
#z = rbind(rnorm(n, mean = 0, sd = 1), rnorm(n, mean = 0, sd = 1))
X = t(A %*% X)
plot(X)
colnames(X) = c("x1", "x2")
data = as_tibble(cbind(X, y))
data %<>% mutate(y = as.factor(y))
y.pred = numeric(nrow(data))
for (i in 1:nrow(data)) {
xi = as.numeric(data[i,1:2])
y0 = exp(-(xi %*% A.inv %*% xi))
cat(y0, "\n")
xi = as.numeric(data[i,1:2] - c(1,2))
y1 = exp(-(xi %*% A.inv %*% xi))
cat(y1, "\n\n")
if (y1 > y0) {
y.pred[i] <- 1
}
else {
y.pred[i] <- 0
}
}
acc <- sum(y.pred == data$y)/100
acc
acc <- sum(y.pred == data$y)/500
acc
acc <- sum(y.pred == data$y)/n
acc
n = 500
A = matrix(c(1, 0.4, 0, 0.9165), nrow = 2, ncol = 2)
y = rbinom(n, 1, 0.5)
X = matrix(nrow = 2)
for (e in y) {
if (e == 0) {
X = cbind(X, c(rnorm(1, mean = 0, sd = 1), rnorm(1, mean = 0, sd = 1)))
}
else {
X = cbind(X, c(rnorm(1, mean = 1, sd = 1), rnorm(1, mean = 2, sd = 1)))
}
}
X = X[,-1]
#z = rbind(rnorm(n, mean = 0, sd = 1), rnorm(n, mean = 0, sd = 1))
X = t(A %*% X)
plot(X)
colnames(X) = c("x1", "x2")
data = as_tibble(cbind(X, y))
data %<>% mutate(y = as.factor(y))
y.pred = numeric(nrow(data))
for (i in 1:nrow(data)) {
xi = as.numeric(data[i,1:2])
y0 = exp(-(xi %*% A.inv %*% xi))
cat(y0, "\n")
xi = as.numeric(data[i,1:2] - c(1,2))
y1 = exp(-(xi %*% A.inv %*% xi))
cat(y1, "\n\n")
if (y1 > y0) {
y.pred[i] <- 1
}
else {
y.pred[i] <- 0
}
}
y.pred = numeric(nrow(data))
for (i in 1:nrow(data)) {
xi = as.numeric(data[i,1:2])
y0 = exp(-(xi %*% A.inv %*% xi))
xi = as.numeric(data[i,1:2] - c(1,2))
y1 = exp(-(xi %*% A.inv %*% xi))
if (y1 > y0) {
y.pred[i] <- 1
}
else {
y.pred[i] <- 0
}
}
acc <- sum(y.pred == data$y)/n
acc
normal.recipe = recipe(y ~ ., data = data)
normal.dt = decision_tree(mode = "classification",
min_n = tune(),
cost_complexity = tune()) %>%
set_engine("rpart")
folds <- vfold_cv(data, repeats = 2)
tree.wflow =
workflow() %>%
add_model(normal.dt) %>%
add_recipe(normal.recipe)
tree.set <- parameters(tree.wflow)
search_res =
tune_bayes(
tree.wflow,
resamples = folds,
param_info = tree.set,
initial = 5,
iter = 30,
metrics = metric_set(accuracy),
control = control_bayes(no_improve = 20, verbose = TRUE)
)
show_best(search_res, metric = "accuracy")
tree.model = decision_tree(mode = "classification",
min_n = 26,
cost_complexity = 0.0804) %>%
set_engine("rpart") %>%
fit(y ~ ., data = data)
tree.model %>%
predict(data) %>%
bind_cols(data) %>%
metrics(truth = y, estimate = .pred_class)
summary(tree.model$fit)
rpart.plot(tree.model$fit, roundint=FALSE)
tree.model %>%
predict(data) %>%
bind_cols(data) %>%
metrics(truth = y, estimate = .pred_class)
show_best(search_res, metric = "accuracy")
tree.model = decision_tree(mode = "classification",
min_n = 17,
cost_complexity = 0.0116) %>%
set_engine("rpart") %>%
fit(y ~ ., data = data)
tree.model %>%
predict(data) %>%
bind_cols(data) %>%
metrics(truth = y, estimate = .pred_class)
summary(tree.model$fit)
rpart.plot(tree.model$fit, roundint=FALSE)
tree.model %>%
predict(data) %>%
bind_cols(data) %>%
metrics(truth = y, estimate = .pred_class)
normal.svm = svm_rbf(mode = "classification",
cost = tune(),
rbf_sigma = tune()) %>%
set_engine("kernlab")
folds <- vfold_cv(data, repeats = 2)
svm.wflow =
workflow() %>%
add_model(normal.svm) %>%
add_recipe(normal.recipe)
svm.set <- parameters(svm.wflow)
search_res =
tune_bayes(
svm.wflow,
resamples = folds,
param_info = svm.set,
initial = 5,
iter = 30,
metrics = metric_set(accuracy),
control = control_bayes(no_improve = 20, verbose = TRUE)
)
show_best(search_res, metric = "accuracy")
svm.model = svm_rbf(mode = "classification",
cost = 1.53,
rbf_sigma = 0.018) %>%
set_engine("kernlab") %>%
fit(y ~ ., data = data)
svm.model %>%
predict(data) %>%
bind_cols(data) %>%
metrics(truth = y, estimate = .pred_class)
s<-ksvm(y~x1+x2, data=data, kernel="rbfdot", C=1.53, kpar=list(sigma = 0.018), type="C-svc")
plot(s, data = data[,-3])
library(tidyverse)
library(magrittr)
setwd("~/Documents/CIMAT/DataScienceR/proyecto_covid19/")
covid.data = read_tsv("200518COVID19MEXICO.csv")
covid.data = read_csv("200518COVID19MEXICO.csv")
View(covid.data)
covid.data = read_csv("/data/200518COVID19MEXICO.csv")
covid.data = read_csv("data/200518COVID19MEXICO.csv")
View(covid.data)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
entidad.catalogo = read_csv("data/Catalogo_entidades.csv")
View(entidad.catalogo)
View(covid.data)
View(entidad.catalogo)
left_join(covid.data, entidad.catalogo, by = "ENTIDAD_UM", copy = FALSE)
View(entidad.catalogo)
left_join(covid.data, entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE)
covid.data = left_join(covid.data, entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE)
View(covid.data)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
covid.data = covid.data %>% left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE)
View(covid.data)
View(entidad.catalogo)
covid.data = covid.data %>% left_join(entidad.catalogo[,-'ABREVIATURA'], by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE)
covid.data = covid.data %>% left_join(entidad.catalogo[,-c('ABREVIATURA')], by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE)
entidad.catalogo[,-c('ABREVIATURA')
]
entidad.catalogo[,-c('ABREVIATURA')]
entidad.catalogo[,-3]
entidad.catalogo = read_csv("data/Catalogo_entidades.csv") %>% select(-ABREVIATURA)
View(entidad.catalogo)
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE)
View(covid.data)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
entidad.catalogo = read_csv("data/Catalogo_entidades.csv") %>% select(-ABREVIATURA)
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE)
View(covid.data)
View(entidad.catalogo)
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_UM) %>%
rename(ENTIDAD_UM = ENTIDAD_FEDERATIVA)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
entidad.catalogo = read_csv("data/Catalogo_entidades.csv") %>% select(-ABREVIATURA)
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_UM) %>%
rename(ENTIDAD_UM = ENTIDAD_FEDERATIVA)
View(covid.data)
colnames(covid.data)
grepl
grepl("^ENTIDAD_*", colnames(covid.data))
colnames(covid.data)[grepl("^ENTIDAD_*", colnames(covid.data))]
covid.data = read_csv("data/200518COVID19MEXICO.csv")
entidad.catalogo = read_csv("data/Catalogo_entidades.csv") %>% select(-ABREVIATURA)
# Expand "ENTIDAD_UM"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_UM) %>%
rename(ENTIDAD_UM = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_NAC"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_NAC" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_NAC) %>%
rename(ENTIDAD_NAC = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_RES"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_RES" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_RES) %>%
rename(ENTIDAD_RES = ENTIDAD_FEDERATIVA)
View(covid.data)
municipio.catalogo = read_csv("data/Catalogo_municipios.csv") %>% select(-ABREVIATURA)
municipio.catalogo = read_csv("data/Catalogo_municipios.csv") %>% select(-CLAVE_ENTIDAD)
View(covid.data)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
entidad.catalogo = read_csv("data/Catalogo_entidades.csv") %>% select(-ABREVIATURA)
municipio.catalogo = read_csv("data/Catalogo_municipios.csv") %>% select(-CLAVE_ENTIDAD)
# Expand "ENTIDAD_UM"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_UM) %>%
rename(ENTIDAD_UM = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_NAC"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_NAC" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_NAC) %>%
rename(ENTIDAD_NAC = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_RES"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_RES" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_RES) %>%
rename(ENTIDAD_RES = ENTIDAD_FEDERATIVA)
# Expand "MUNICIPIO_RES"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("MUNICIPIO_RES" = "CLAVE_MUNICIPIO"), copy = FALSE) %>%
select(-MUNICIPIO_RES) %>%
rename(MUNICIPIO_RES = CLAVE_MUNICIPIO)
# Expand "MUNICIPIO_RES"
covid.data = covid.data %>%
left_join(municipio.catalogo, by = c("MUNICIPIO_RES" = "CLAVE_MUNICIPIO"), copy = FALSE) %>%
select(-MUNICIPIO_RES) %>%
rename(MUNICIPIO_RES = CLAVE_MUNICIPIO)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
entidad.catalogo = read_csv("data/Catalogo_entidades.csv") %>% select(-ABREVIATURA)
municipio.catalogo = read_csv("data/Catalogo_municipios.csv") %>% select(-CLAVE_ENTIDAD)
# Expand "ENTIDAD_UM"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_UM) %>%
rename(ENTIDAD_UM = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_NAC"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_NAC" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_NAC) %>%
rename(ENTIDAD_NAC = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_RES"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_RES" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_RES) %>%
rename(ENTIDAD_RES = ENTIDAD_FEDERATIVA)
# Expand "MUNICIPIO_RES"
covid.data = covid.data %>%
left_join(municipio.catalogo, by = c("MUNICIPIO_RES" = "CLAVE_MUNICIPIO"), copy = FALSE) %>%
select(-MUNICIPIO_RES) %>%
rename(MUNICIPIO_RES = CLAVE_MUNICIPIO)
covid.data = covid.data %>%
left_join(municipio.catalogo, by = c("MUNICIPIO_RES" = "CLAVE_MUNICIPIO"), copy = FALSE)
View(covid.data)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
entidad.catalogo = read_csv("data/Catalogo_entidades.csv") %>% select(-ABREVIATURA)
municipio.catalogo = read_csv("data/Catalogo_municipios.csv") %>% select(-CLAVE_ENTIDAD)
# Expand "ENTIDAD_UM"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_UM) %>%
rename(ENTIDAD_UM = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_NAC"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_NAC" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_NAC) %>%
rename(ENTIDAD_NAC = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_RES"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_RES" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_RES) %>%
rename(ENTIDAD_RES = ENTIDAD_FEDERATIVA)
# Expand "MUNICIPIO_RES"
covid.data = covid.data %>%
left_join(municipio.catalogo, by = c("MUNICIPIO_RES" = "CLAVE_MUNICIPIO"), copy = FALSE) %>%
select(-MUNICIPIO_RES) %>%
rename(MUNICIPIO_RES = MUNICIPIO)
View(covid.data)
View(covid.data)
origen.catalogo = read_csv("data/Catalogo_origen.csv")
sector.catalogo = read_csv("data/Catalogo_sector.csv")
# Expand "ORIGEN"
covid.data = covid.data %>%
left_join(origen.catalogo, by = c("ORIGEN" = "CLAVE"), copy = FALSE) %>%
select(-ORIGEN) %>%
rename(ORIGEN = DESCRIPCIÓN)
# Expand "SECTOR"
covid.data = covid.data %>%
left_join(sector.catalogo, by = c("SECTOR" = "CLAVE"), copy = FALSE) %>%
select(-ORIGEN) %>%
rename(ORIGEN = DESCRIPCIÓN)
View(covid.data)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
entidad.catalogo = read_csv("data/Catalogo_entidades.csv") %>% select(-ABREVIATURA)
municipio.catalogo = read_csv("data/Catalogo_municipios.csv") %>% select(-CLAVE_ENTIDAD)
origen.catalogo = read_csv("data/Catalogo_origen.csv")
sector.catalogo = read_csv("data/Catalogo_sector.csv")
# Expand "ENTIDAD_UM"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_UM) %>%
rename(ENTIDAD_UM = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_NAC"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_NAC" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_NAC) %>%
rename(ENTIDAD_NAC = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_RES"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_RES" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_RES) %>%
rename(ENTIDAD_RES = ENTIDAD_FEDERATIVA)
# Expand "MUNICIPIO_RES"
covid.data = covid.data %>%
left_join(municipio.catalogo, by = c("MUNICIPIO_RES" = "CLAVE_MUNICIPIO"), copy = FALSE) %>%
select(-MUNICIPIO_RES) %>%
rename(MUNICIPIO_RES = MUNICIPIO)
# Expand "ORIGEN"
covid.data = covid.data %>%
left_join(origen.catalogo, by = c("ORIGEN" = "CLAVE"), copy = FALSE) %>%
select(-ORIGEN) %>%
rename(ORIGEN = DESCRIPCIÓN)
# Expand "SECTOR"
covid.data = covid.data %>%
left_join(sector.catalogo, by = c("SECTOR" = "CLAVE"), copy = FALSE) %>%
select(-SECTOR) %>%
rename(SECTOR = DESCRIPCIÓN)
View(covid.data)
sexo.catalogo = read_csv("data/Catalogo_sexo.csv")
tipo.paciente.catalogo = read_csv("data/Catalogo_tipo_paciente.csv")
# Expand "SEXO"
covid.data = covid.data %>%
left_join(sexo.catalogo, by = c("SEXO" = "CLAVE"), copy = FALSE) %>%
select(-SEXO) %>%
rename(SEXO = DESCRIPCIÓN)
# Expand "TIPO PACIENTE"
covid.data = covid.data %>%
left_join(tipo.paciente.catalogo, by = c("TIPO_PACIENTE" = "CLAVE"), copy = FALSE) %>%
select(-SEXO) %>%
rename(SEXO = DESCRIPCIÓN)
View(covid.data)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
entidad.catalogo = read_csv("data/Catalogo_entidades.csv") %>% select(-ABREVIATURA)
municipio.catalogo = read_csv("data/Catalogo_municipios.csv") %>% select(-CLAVE_ENTIDAD)
origen.catalogo = read_csv("data/Catalogo_origen.csv")
sector.catalogo = read_csv("data/Catalogo_sector.csv")
sexo.catalogo = read_csv("data/Catalogo_sexo.csv")
tipo.paciente.catalogo = read_csv("data/Catalogo_tipo_paciente.csv")
# Expand "ENTIDAD_UM"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_UM" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_UM) %>%
rename(ENTIDAD_UM = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_NAC"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_NAC" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_NAC) %>%
rename(ENTIDAD_NAC = ENTIDAD_FEDERATIVA)
# Expand "ENTIDAD_RES"
covid.data = covid.data %>%
left_join(entidad.catalogo, by = c("ENTIDAD_RES" = "CLAVE_ENTIDAD"), copy = FALSE) %>%
select(-ENTIDAD_RES) %>%
rename(ENTIDAD_RES = ENTIDAD_FEDERATIVA)
# Expand "MUNICIPIO_RES"
covid.data = covid.data %>%
left_join(municipio.catalogo, by = c("MUNICIPIO_RES" = "CLAVE_MUNICIPIO"), copy = FALSE) %>%
select(-MUNICIPIO_RES) %>%
rename(MUNICIPIO_RES = MUNICIPIO)
# Expand "ORIGEN"
covid.data = covid.data %>%
left_join(origen.catalogo, by = c("ORIGEN" = "CLAVE"), copy = FALSE) %>%
select(-ORIGEN) %>%
rename(ORIGEN = DESCRIPCIÓN)
# Expand "SECTOR"
covid.data = covid.data %>%
left_join(sector.catalogo, by = c("SECTOR" = "CLAVE"), copy = FALSE) %>%
select(-SECTOR) %>%
rename(SECTOR = DESCRIPCIÓN)
# Expand "SEXO"
covid.data = covid.data %>%
left_join(sexo.catalogo, by = c("SEXO" = "CLAVE"), copy = FALSE) %>%
select(-SEXO) %>%
rename(SEXO = DESCRIPCIÓN)
# Expand "TIPO PACIENTE"
covid.data = covid.data %>%
left_join(tipo.paciente.catalogo, by = c("TIPO_PACIENTE" = "CLAVE"), copy = FALSE) %>%
select(-TIPO_PACIENTE) %>%
rename(TIPO_PACIENTE = DESCRIPCIÓN)
View(covid.data)
remove(covid.data)
covid.data = read_csv("data/200518COVID19MEXICO.csv")
